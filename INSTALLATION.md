# Инструкция по установке и запуску

## Быстрый старт

### 1. Установка зависимостей

```bash
npm install
```

### 2. Запуск приложения

```bash
npm run dev
```

Приложение откроется в браузере по адресу: http://localhost:5173

### 3. Сборка для продакшена

```bash
npm run build
```

Собранное приложение будет в папке `dist/`

## Первоначальная настройка

После запуска приложения рекомендуется выполнить следующие шаги:

### Шаг 1: Настройте константы
1. Перейдите в раздел **"Настройки"**
2. Укажите:
   - Стоимость электричества (руб/кВт⋅ч) - средняя по РФ: 6.5
   - Стоимость пупырки/скотча (руб) - примерно: 15
   - Дефолтный процент брака (%) - рекомендуется: 5
   - Дефолтный процент расходников (%) - рекомендуется: 10
   - Комиссии WB и Ozon (%)

### Шаг 2: Добавьте принтеры
1. Перейдите в **"Принтеры"**
2. Добавьте ваши 3D-принтеры с указанием мощности потребления
   
   Примерная мощность популярных моделей:
   - Bambu Lab P1S / X1 Carbon: 0.35 кВт
   - Prusa MK4: 0.24 кВт
   - Ender 3 V2: 0.27 кВт
   - Creality K1: 0.40 кВт

### Шаг 3: Создайте справочник упаковки
1. Перейдите в **"Упаковка"**
2. Добавьте типы упаковки с размерами и стоимостью
   
   Примеры:
   - Коробка 20×15×10 см
   - Пакет bubble большой
   - Коробка почтовая M

### Шаг 4: Настройте AI (опционально)
1. Получите API-ключ на [kie.ai](https://kie.ai)
2. В разделе **"Настройки"** введите API-ключ
3. Настройте промпты для генерации описаний (или оставьте дефолтные)

### Шаг 5: Создайте первую модель
1. Перейдите в **"Модели"**
2. Нажмите **"Добавить модель"**
3. Заполните все необходимые поля
4. Система автоматически рассчитает себестоимость и рекомендуемые цены

## Основные функции

### Управление моделями
- **Создание модели** - автоматическая генерация артикула PM-XXXXXX
- **Редактирование** - изменение параметров с пересчётом цен
- **Дублирование** - быстрое создание похожих моделей
- **Архивирование** - перемещение неактуальных моделей в архив
- **Удаление** - безвозвратное удаление модели

### Расчёты
Система автоматически рассчитывает:
- Итоговый вес (с учётом многоцветной печати)
- Стоимость материалов и расходников
- Стоимость электроэнергии
- Надбавку на брак
- Себестоимость производства
- Полную себестоимость с упаковкой
- Рекомендуемые цены для WB и Ozon
- Чистую прибыль по каждому маркетплейсу

### AI-генерация
Автоматическое создание:
- SEO-оптимизированных названий для WB и Ozon
- Продающих описаний для каждого маркетплейса
- Два режима: быстрая (текст) и детальная (с анализом изображений)

### Дашборд
Отображает:
- Общее количество активных моделей
- Среднюю маржу по всем моделям
- Самую прибыльную модель
- Самую невыгодную модель

### Поиск и фильтрация
- Поиск по названию, артикулу, описанию
- Фильтрация активных/архивных моделей
- Сортировка по дате, названию, прибыльности

### Резервное копирование
- **Экспорт данных** - сохранение всех данных в JSON-файл
- **Импорт данных** - восстановление из резервной копии

## Формулы расчёта

```
Вес_итоговый = Вес_модели × (многоцветная_печать ? 1.15 : 1)

Стоимость_материала = (Вес_итоговый / 1000) × Цена_пластика × (1 + Процент_расходников / 100)

Стоимость_электричества = Время_печати × Мощность_принтера × Стоимость_электричества_кВтч

Надбавка_на_брак = (Стоимость_материала + Стоимость_электричества) × (Процент_брака / 100)

Себестоимость_производства = Стоимость_материала + Стоимость_электричества + Надбавка_на_брак

Себестоимость_полная = Себестоимость_производства + Стоимость_упаковки + Стоимость_пупырки_скотча

Цена_WB = (Себестоимость_полная + Логистика_WB + Маржа) / (1 - Комиссия_WB / 100)

Цена_Ozon = (Себестоимость_полная + Логистика_Ozon + Маржа) / (1 - Комиссия_Ozon / 100)

Прибыль = Маржа (одинаковая для обоих маркетплейсов)
```

## Хранение данных

Все данные хранятся локально в браузере (localStorage). Данные не передаются на сервер и остаются только на вашем компьютере.

**Важно:** 
- Регулярно создавайте резервные копии через "Экспорт данных"
- При очистке кэша браузера данные будут удалены
- При переходе на другой компьютер используйте "Импорт данных"

## Технические требования

- Современный браузер (Chrome, Firefox, Safari, Edge)
- JavaScript включён
- Для AI-генерации требуется интернет-соединение

## Решение проблем

### Приложение не запускается
```bash
# Удалите node_modules и переустановите
rm -rf node_modules package-lock.json
npm install
npm run dev
```

### Ошибка при генерации AI
- Проверьте API-ключ kie.ai в настройках
- Убедитесь, что есть интернет-соединение
- Проверьте, что заполнены обязательные поля модели

### Потерялись данные
- Восстановите из резервной копии через "Импорт данных"
- Если копии нет, данные восстановить невозможно

## Поддержка

Если у вас возникли вопросы или проблемы:
1. Проверьте консоль браузера (F12) на наличие ошибок
2. Убедитесь, что используете последнюю версию
3. Попробуйте очистить кэш браузера и перезапустить

## Обновления

Для получения обновлений:
```bash
git pull
npm install
npm run dev
```
